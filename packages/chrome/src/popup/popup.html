<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Whiteout</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- PRIMARY MODE: scan + open panel -->
  <div id="primary-view">
    <div class="popup-container">
      <header class="popup-header">
        <h1>Whiteout</h1>
        <span class="version">v0.1.0</span>
      </header>

      <div class="status-bar" id="status-bar">
        <span class="status-dot" id="status-dot"></span>
        <span class="status-text" id="status-text">Pret</span>
      </div>

      <div class="actions">
        <button id="btn-scan" class="btn btn-primary">Scanner cette page</button>
        <button id="btn-panel" class="btn btn-secondary">Ouvrir le panneau de revue</button>
      </div>

      <footer class="popup-footer">
        <a href="#" id="link-options">Options</a>
      </footer>
    </div>
  </div>

  <!-- SECONDARY MODE: copy-paste anonymization -->
  <div id="secondary-view" hidden>
    <header class="paste-header">
      <h1>Whiteout</h1>
      <p class="subtitle">Anonymisation locale de documents</p>
      <button id="back-to-primary" class="icon-btn" title="Retour">&larr;</button>
    </header>

    <main>
      <!-- Input -->
      <section id="input-panel" class="panel">
        <h2>Texte source</h2>
        <textarea
          id="input-text"
          placeholder="Collez votre texte ici..."
          rows="10"
        ></textarea>
        <div class="paste-actions">
          <button id="process-btn" class="btn btn-primary">Anonymiser</button>
          <span id="language-indicator" class="badge"></span>
        </div>
      </section>

      <!-- Review -->
      <section id="review-panel" class="panel" hidden>
        <h2>Verification</h2>
        <div class="review-toolbar">
          <button id="accept-all" class="btn btn-sm">Tout accepter</button>
          <button id="skip-unconfirmed" class="btn btn-sm">Ignorer les non-confirmes</button>
          <span id="entity-counter" class="badge"></span>
        </div>
        <div id="review-text" class="review-text"></div>
        <div class="paste-actions">
          <button id="generate-btn" class="btn btn-primary">Generer le texte anonymise</button>
        </div>
      </section>

      <!-- Output -->
      <section id="output-panel" class="panel" hidden>
        <h2>Resultat</h2>
        <textarea id="output-text" readonly rows="10"></textarea>
        <div class="paste-actions">
          <button id="copy-btn" class="btn">Copier</button>
          <button id="download-btn" class="btn">Telecharger (.txt)</button>
        </div>
      </section>
    </main>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
